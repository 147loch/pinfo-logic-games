var Sudoku=function(){for(var e=function(e){return e%Sudoku.ROW_COL_SEC_SIZE},t=function(e){return Math.floor(e/Sudoku.ROW_COL_SEC_SIZE)},i=function(t){return Math.floor(t/Sudoku.SEC_GROUP_SIZE)*Sudoku.SEC_GROUP_SIZE+Math.floor(e(t)/Sudoku.GRID_SIZE)*Sudoku.GRID_SIZE},n=function(t){return Math.floor(t/Sudoku.SEC_GROUP_SIZE)*Sudoku.GRID_SIZE+Math.floor(e(t)/Sudoku.GRID_SIZE)},r=function(e){return Sudoku.ROW_COL_SEC_SIZE*e},o=function(e){return e%Sudoku.GRID_SIZE*Sudoku.GRID_SIZE+Math.floor(e/Sudoku.GRID_SIZE)*Sudoku.SEC_GROUP_SIZE},s=function(e,t){return e+Sudoku.ROW_COL_SEC_SIZE*t},l=function(e,t){return e*Sudoku.ROW_COL_SEC_SIZE+t},a=function(e,t){return o(e)+Math.floor(t/Sudoku.GRID_SIZE)*Sudoku.ROW_COL_SEC_SIZE+t%Sudoku.GRID_SIZE},u=function(e){"undefined"!=typeof console&&console.log&&console.log(e)},c=function(e){"undefined"!=typeof process&&process.stdout&&process.stdout.write?process.stdout.write(e):u(e)},g=new Array(Sudoku.BOARD_SIZE),q=new Array(Sudoku.BOARD_SIZE),f=new Array(Sudoku.BOARD_SIZE),S=new Array(Sudoku.POSSIBILITY_SIZE),_=new Array(Sudoku.BOARD_SIZE),w=0;w<Sudoku.BOARD_SIZE;w++)_[w]=w;var E=new Array(Sudoku.ROW_COL_SEC_SIZE);for(w=0;w<Sudoku.ROW_COL_SEC_SIZE;w++)E[w]=w;var I=!1,h=!1,v=[],m=[],d=Sudoku.PrintStyle.READABLE,O=0,y=function(){for(var e=0;e<Sudoku.BOARD_SIZE;e++)q[e]=0;for(e=0;e<Sudoku.BOARD_SIZE;e++)f[e]=0;for(e=0;e<Sudoku.POSSIBILITY_SIZE;e++)S[e]=0;v=[],m=[];for(var t=0;t<Sudoku.BOARD_SIZE;t++)if(g[t]>0){var i=g[t]-1,n=s(i,t),r=g[t];if(0!=S[n])return!1;M.call(this,t,1,r),(h||I)&&K.call(this,new this.LogItem(1,Sudoku.LogType.GIVEN,r,t))}return!0},R=function(e){return!!C.call(this,e)||(!!T.call(this,e)||(!!L.call(this,e)||(!!p.call(this,e)||(!!z.call(this,e)||(!!P.call(this,e)||(!!W.call(this,e)||(!!N.call(this,e)||(!!A.call(this,e)||(!!k.call(this,e)||(!!G.call(this,e)||!!H.call(this,e)))))))))))},C=function(e){for(var t=0;t<Sudoku.BOARD_SIZE;t++)if(0==q[t]){for(var i=0,n=0,r=0;r<Sudoku.ROW_COL_SEC_SIZE;r++){var o=s(r,t);0==S[o]&&(i++,n=r+1)}if(1==i)return M.call(this,t,e,n),(h||I)&&K.call(this,new this.LogItem(e,Sudoku.LogType.SINGLE,n,t)),!0}return!1},L=function(e){for(var t=0;t<Sudoku.ROW_COL_SEC_SIZE;t++)for(var i=0;i<Sudoku.ROW_COL_SEC_SIZE;i++){for(var n=0,r=0,o=0;o<Sudoku.ROW_COL_SEC_SIZE;o++){var l=t*Sudoku.ROW_COL_SEC_SIZE+o,a=s(i,l);0==S[a]&&(n++,r=l)}if(1==n){var u=i+1;return(h||I)&&K.call(this,new this.LogItem(e,Sudoku.LogType.HIDDEN_SINGLE_ROW,u,r)),M.call(this,r,e,u),!0}}return!1},p=function(e){for(var t=0;t<Sudoku.ROW_COL_SEC_SIZE;t++)for(var i=0;i<Sudoku.ROW_COL_SEC_SIZE;i++){for(var n=0,r=0,o=0;o<Sudoku.ROW_COL_SEC_SIZE;o++){var a=l(o,t),u=s(i,a);0==S[u]&&(n++,r=a)}if(1==n){var c=i+1;return(h||I)&&K.call(this,new this.LogItem(e,Sudoku.LogType.HIDDEN_SINGLE_COLUMN,c,r)),M.call(this,r,e,c),!0}}return!1},T=function(e){for(var t=0;t<Sudoku.ROW_COL_SEC_SIZE;t++)for(var i=o(t),n=0;n<Sudoku.ROW_COL_SEC_SIZE;n++){for(var r=0,l=0,a=0;a<Sudoku.GRID_SIZE;a++)for(var u=0;u<Sudoku.GRID_SIZE;u++){var c=i+a+Sudoku.ROW_COL_SEC_SIZE*u,g=s(n,c);0==S[g]&&(r++,l=c)}if(1==r){var q=n+1;return(h||I)&&K.call(this,new this.LogItem(e,Sudoku.LogType.HIDDEN_SINGLE_SECTION,q,l)),M.call(this,l,e,q),!0}}return!1},D=function(e,t){for(var i=0,n=B.call(this),r=0;r<Sudoku.ROW_COL_SEC_SIZE;r++){var o=E[r],l=s(o,n);if(0==S[l]){if(i==t){var a=o+1;return(h||I)&&K.call(this,new this.LogItem(e,Sudoku.LogType.GUESS,a,n)),M.call(this,n,e,a),!0}i++}}return!1},b=function(){for(var e=0;e<Sudoku.BOARD_SIZE;e++)if(0==q[e]){for(var t=0,i=0;i<Sudoku.ROW_COL_SEC_SIZE;i++){var n=s(i,e);0==S[n]&&t++}if(0==t)return!0}return!1},Z=function(e){(h||I)&&K.call(this,new this.LogItem(e,Sudoku.LogType.ROLLBACK));for(var t=0;t<Sudoku.BOARD_SIZE;t++)f[t]==e&&(f[t]=0,q[t]=0);for(t=0;t<Sudoku.POSSIBILITY_SIZE;t++)S[t]==e&&(S[t]=0);for(;m.length>0&&m[m.length-1]==e;)m.pop()},P=function(e){for(var i=0;i<Sudoku.ROW_COL_SEC_SIZE;i++)for(var l=0;l<Sudoku.ROW_COL_SEC_SIZE;l++){for(var a=o(l),u=!0,c=-1,g=0;g<Sudoku.GRID_SIZE;g++)for(var q=0;q<Sudoku.GRID_SIZE;q++){var f=a+q+Sudoku.ROW_COL_SEC_SIZE*g,_=s(i,f);0==S[_]&&(-1==c||c==g?c=g:u=!1)}if(u&&-1!=c){var w=!1,E=t(a)+c,v=r(E);for(q=0;q<Sudoku.ROW_COL_SEC_SIZE;q++){var m=v+q,d=n(m);_=s(i,m);l!=d&&0==S[_]&&(S[_]=e,w=!0)}if(w)return(h||I)&&K.call(this,new this.LogItem(e,Sudoku.LogType.POINTING_PAIR_TRIPLE_ROW,i+1,v)),!0}}return!1},N=function(n){for(var o=0;o<Sudoku.ROW_COL_SEC_SIZE;o++)for(var a=0;a<Sudoku.ROW_COL_SEC_SIZE;a++){for(var u=r(a),c=!0,g=-1,q=0;q<Sudoku.GRID_SIZE;q++)for(var f=0;f<Sudoku.GRID_SIZE;f++){var _=q*Sudoku.GRID_SIZE+f,w=l(a,_),E=s(o,w);0==S[E]&&(-1==g||g==q?g=q:c=!1)}if(c&&-1!=g){var v=!1,m=(_=Sudoku.GRID_SIZE*g,i(l(a,_))),d=t(m),O=e(m);for(q=0;q<Sudoku.GRID_SIZE;q++)for(f=0;f<Sudoku.GRID_SIZE;f++){var y=d+q;w=l(y,O+f),E=s(o,w);a!=y&&0==S[E]&&(S[E]=n,v=!0)}if(v)return(h||I)&&K.call(this,new this.LogItem(n,Sudoku.LogType.ROW_BOX,o+1,u)),!0}}return!1},A=function(n){for(var o=0;o<Sudoku.ROW_COL_SEC_SIZE;o++)for(var a=0;a<Sudoku.ROW_COL_SEC_SIZE;a++){for(var u=r(a),c=!0,g=-1,q=0;q<Sudoku.GRID_SIZE;q++)for(var f=0;f<Sudoku.GRID_SIZE;f++){var _=q*Sudoku.GRID_SIZE+f,w=l(a,_),E=s(o,w);0==S[E]&&(-1==g||g==q?g=q:c=!1)}if(c&&-1!=g){var v=!1,m=(_=Sudoku.GRID_SIZE*g,i(l(a,_))),d=t(m),O=e(m);for(q=0;q<Sudoku.GRID_SIZE;q++)for(f=0;f<Sudoku.GRID_SIZE;f++){var y=d+q;w=l(y,O+f),E=s(o,w);a!=y&&0==S[E]&&(S[E]=n,v=!0)}if(v)return(h||I)&&K.call(this,new this.LogItem(n,Sudoku.LogType.ROW_BOX,o+1,u)),!0}}return!1},W=function(t){for(var i=0;i<Sudoku.ROW_COL_SEC_SIZE;i++)for(var r=0;r<Sudoku.ROW_COL_SEC_SIZE;r++){for(var l=o(r),a=!0,u=-1,c=0;c<Sudoku.GRID_SIZE;c++)for(var g=0;g<Sudoku.GRID_SIZE;g++){var q=l+c+Sudoku.ROW_COL_SEC_SIZE*g,f=s(i,q);0==S[f]&&(-1==u||u==c?u=c:a=!1)}if(a&&-1!=u){var _=!1,w=e(l)+u,E=w;for(c=0;c<Sudoku.ROW_COL_SEC_SIZE;c++){var v=E+Sudoku.ROW_COL_SEC_SIZE*c,m=n(v);f=s(i,v);r!=m&&0==S[f]&&(S[f]=t,_=!0)}if(_)return(h||I)&&K.call(this,new this.LogItem(t,Sudoku.LogType.POINTING_PAIR_TRIPLE_COLUMN,i+1,E)),!0}}return!1},k=function(e){for(var t=0;t<Sudoku.ROW_COL_SEC_SIZE;t++)for(var i=0;i<Sudoku.ROW_COL_SEC_SIZE;i++){for(var n=-1,r=-1,o=0,a=0;a<Sudoku.ROW_COL_SEC_SIZE;a++){var u=l(t,a),c=s(i,u);0==S[c]&&(-1==n||n==a?n=a:-1!=r&&r!=a||(r=a),o++)}if(2==o)for(var g=i+1;g<Sudoku.ROW_COL_SEC_SIZE;g++){var q=-1,f=-1,_=0;for(a=0;a<Sudoku.ROW_COL_SEC_SIZE;a++){u=l(t,a),c=s(g,u);0==S[c]&&(-1==q||q==a?q=a:-1!=f&&f!=a||(f=a),_++)}if(2==_&&n==q&&r==f){for(var w=!1,E=0;E<Sudoku.ROW_COL_SEC_SIZE;E++)if(E!=i&&E!=g){var v=l(t,n),m=l(t,r),d=s(E,v),O=s(E,m);0==S[d]&&(S[d]=e,w=!0),0==S[O]&&(S[O]=e,w=!0)}if(w)return(h||I)&&K.call(this,new this.LogItem(e,Sudoku.LogType.HIDDEN_PAIR_ROW,i+1,l(t,n))),!0}}}return!1},G=function(e){for(var t=0;t<Sudoku.ROW_COL_SEC_SIZE;t++)for(var i=0;i<Sudoku.ROW_COL_SEC_SIZE;i++){for(var n=-1,r=-1,o=0,a=0;a<Sudoku.ROW_COL_SEC_SIZE;a++){var u=l(a,t),c=s(i,u);0==S[c]&&(-1==n||n==a?n=a:-1!=r&&r!=a||(r=a),o++)}if(2==o)for(var g=i+1;g<Sudoku.ROW_COL_SEC_SIZE;g++){var q=-1,f=-1,_=0;for(a=0;a<Sudoku.ROW_COL_SEC_SIZE;a++){u=l(a,t),c=s(g,u);0==S[c]&&(-1==q||q==a?q=a:-1!=f&&f!=a||(f=a),_++)}if(2==_&&n==q&&r==f){for(var w=!1,E=0;E<Sudoku.ROW_COL_SEC_SIZE;E++)if(E!=i&&E!=g){var v=l(n,t),m=l(r,t),d=s(E,v),O=s(E,m);0==S[d]&&(S[d]=e,w=!0),0==S[O]&&(S[O]=e,w=!0)}if(w)return(h||I)&&K.call(this,new this.LogItem(e,Sudoku.LogType.HIDDEN_PAIR_COLUMN,i+1,l(n,t))),!0}}}return!1},H=function(e){for(var t=0;t<Sudoku.ROW_COL_SEC_SIZE;t++)for(var i=0;i<Sudoku.ROW_COL_SEC_SIZE;i++){for(var n=-1,r=-1,o=0,l=0;l<Sudoku.ROW_COL_SEC_SIZE;l++){var u=a(t,l),c=s(i,u);0==S[c]&&(-1==n||n==l?n=l:-1!=r&&r!=l||(r=l),o++)}if(2==o)for(var g=i+1;g<Sudoku.ROW_COL_SEC_SIZE;g++){var q=-1,f=-1,_=0;for(l=0;l<Sudoku.ROW_COL_SEC_SIZE;l++){u=a(t,l),c=s(g,u);0==S[c]&&(-1==q||q==l?q=l:-1!=f&&f!=l||(f=l),_++)}if(2==_&&n==q&&r==f){for(var w=!1,E=0;E<Sudoku.ROW_COL_SEC_SIZE;E++)if(E!=i&&E!=g){var v=a(t,n),m=a(t,r),d=s(E,v),O=s(E,m);0==S[d]&&(S[d]=e,w=!0),0==S[O]&&(S[O]=e,w=!0)}if(w)return(h||I)&&K.call(this,new this.LogItem(e,Sudoku.LogType.HIDDEN_PAIR_SECTION,i+1,a(t,n))),!0}}}return!1},M=function(n,r,o){if(0!=q[n])throw"Marking position that already has been marked.";if(0!=f[n])throw"Marking position that was marked another round.";var l=o-1;q[n]=o;var a=s(l,n);if(0!=S[a])throw"Marking impossible position.";f[n]=r;for(var u=t(n)*Sudoku.ROW_COL_SEC_SIZE,c=0;c<Sudoku.ROW_COL_SEC_SIZE;c++){var g=s(l,u+c);0==S[g]&&(S[g]=r)}for(var _=e(n),w=0;w<Sudoku.ROW_COL_SEC_SIZE;w++){var E=_+Sudoku.ROW_COL_SEC_SIZE*w;g=s(l,E);0==S[g]&&(S[g]=r)}var I=i(n);for(w=0;w<Sudoku.GRID_SIZE;w++)for(var h=0;h<Sudoku.GRID_SIZE;h++){var v=I+w+Sudoku.ROW_COL_SEC_SIZE*h;g=s(l,v);0==S[g]&&(S[g]=r)}for(l=0;l<Sudoku.ROW_COL_SEC_SIZE;l++){g=s(l,n);0==S[g]&&(S[g]=r)}},B=function(){for(var e=10,t=0,i=0;i<Sudoku.BOARD_SIZE;i++){var n=_[i];if(0==q[n]){for(var r=0,o=0;o<Sudoku.ROW_COL_SEC_SIZE;o++){var l=s(o,n);0==S[l]&&r++}r<e&&(e=r,t=n)}}return t},z=function(n){for(var r=0;r<Sudoku.BOARD_SIZE;r++){if(2==U(r))for(var o=t(r),s=e(r),a=i(r),u=r;u<Sudoku.BOARD_SIZE;u++){if(r!=u)if(2==U(u)&&x(r,u)){if(o==t(u)){for(var c=!1,g=0;g<Sudoku.ROW_COL_SEC_SIZE;g++){(w=l(o,g))!=r&&w!=u&&j(r,w,n)&&(c=!0)}if(c)return(h||I)&&K.call(this,new this.LogItem(n,Sudoku.LogType.NAKED_PAIR_ROW,0,r)),!0}if(s==e(u)){c=!1;for(var q=0;q<Sudoku.ROW_COL_SEC_SIZE;q++){(w=l(q,s))!=r&&w!=u&&j(r,w,n)&&(c=!0)}if(c)return(h||I)&&K.call(this,new this.LogItem(n,Sudoku.LogType.NAKED_PAIR_COLUMN,0,r)),!0}if(a==i(u)){c=!1;for(var f=i(r),S=0;S<Sudoku.GRID_SIZE;S++)for(var _=0;_<Sudoku.GRID_SIZE;_++){var w;(w=f+S+Sudoku.ROW_COL_SEC_SIZE*_)!=r&&w!=u&&j(r,w,n)&&(c=!0)}if(c)return(h||I)&&K.call(this,new this.LogItem(n,Sudoku.LogType.NAKED_PAIR_SECTION,0,r)),!0}}}}return!1},U=function(e){for(var t=0,i=0;i<Sudoku.ROW_COL_SEC_SIZE;i++){var n=s(i,e);0==S[n]&&t++}return t},x=function(e,t){for(var i=0;i<Sudoku.ROW_COL_SEC_SIZE;i++){var n=s(i,e),r=s(i,t);if(!(0!=S[n]&&0!=S[r]||0==S[n]&&0==S[r]))return!1}return!0},K=function(e){h&&e.print(),I&&(v.push(e),m.push(e))},F=function(){J(_,Sudoku.BOARD_SIZE),J(E,Sudoku.ROW_COL_SEC_SIZE)},V=function(e){c(X.call(this,e))},X=function(e){for(var t="",i=0;i<Sudoku.BOARD_SIZE;i++)d==Sudoku.PrintStyle.READABLE&&(t+=" "),0==e[i]?t+=".":t+=e[i],i==Sudoku.BOARD_SIZE-1?(d==Sudoku.PrintStyle.CSV?t+=",":t+="\n",d!=Sudoku.PrintStyle.READABLE&&d!=Sudoku.PrintStyle.COMPACT||(t+="\n")):i%Sudoku.ROW_COL_SEC_SIZE==Sudoku.ROW_COL_SEC_SIZE-1?(d!=Sudoku.PrintStyle.READABLE&&d!=Sudoku.PrintStyle.COMPACT||(t+="\n"),i%Sudoku.SEC_GROUP_SIZE==Sudoku.SEC_GROUP_SIZE-1&&d==Sudoku.PrintStyle.READABLE&&(t+="-------|-------|-------\n")):i%Sudoku.GRID_SIZE==Sudoku.GRID_SIZE-1&&d==Sudoku.PrintStyle.READABLE&&(t+=" |");return t},Y=function(e){c(Q(e))},Q=function(e){var t="";I||(t+="History was not recorded.",d==Sudoku.PrintStyle.CSV?t+=" -- ":t+="\n");for(var i=0;i<e.length;i++)t+=i+1+". "+e[i].toString(),d==Sudoku.PrintStyle.CSV?t+=" -- ":t+="\n";return d==Sudoku.PrintStyle.CSV?t+=",":t+="\n",t},j=function(e,t,i){for(var n=!1,r=0;r<Sudoku.ROW_COL_SEC_SIZE;r++){var o=s(r,e),l=s(r,t);0==S[o]&&0==S[l]&&(S[l]=i,n=!0)}return n},J=function(e,t){for(var i=0;i<t;i++){var n=t-i,r=Math.floor(Math.random()*n)+i,o=e[i];e[i]=e[r],e[r]=o}},$=function(e,t){for(var i=0,n=0;n<e.length;n++)e[n].getType()==t&&i++;return i};this.LogItem=function(i,n,r,o){var s=i,l=n,a=r,c=o;this.getRound=function(){return s},this.print=function(){u(this.toString())},this.getType=function(){return l},this.getColumn=function(){return-1==c?-1:e(c)},this.getRow=function(){return-1==c?-1:t(c)},this.getPosition=function(){return c},this.getValue=function(){return a},this.getDescription=function(){switch(this.getType()){case Sudoku.LogType.GIVEN:return"Mark given";case Sudoku.LogType.ROLLBACK:return"Roll back round";case Sudoku.LogType.GUESS:return"Mark guess (start round)";case Sudoku.LogType.HIDDEN_SINGLE_ROW:return"Mark single possibility for value in row";case Sudoku.LogType.HIDDEN_SINGLE_COLUMN:return"Mark single possibility for value in column";case Sudoku.LogType.HIDDEN_SINGLE_SECTION:return"Mark single possibility for value in section";case Sudoku.LogType.SINGLE:return"Mark only possibility for cell";case Sudoku.LogType.NAKED_PAIR_ROW:return"Remove possibilities for naked pair in row";case Sudoku.LogType.NAKED_PAIR_COLUMN:return"Remove possibilities for naked pair in column";case Sudoku.LogType.NAKED_PAIR_SECTION:return"Remove possibilities for naked pair in section";case Sudoku.LogType.POINTING_PAIR_TRIPLE_ROW:return"Remove possibilities for row because all values are in one section";case Sudoku.LogType.POINTING_PAIR_TRIPLE_COLUMN:return"Remove possibilities for column because all values are in one section";case Sudoku.LogType.ROW_BOX:return"Remove possibilities for section because all values are in one row";case Sudoku.LogType.COLUMN_BOX:return"Remove possibilities for section because all values are in one column";case Sudoku.LogType.HIDDEN_PAIR_ROW:return"Remove possibilities from hidden pair in row";case Sudoku.LogType.HIDDEN_PAIR_COLUMN:return"Remove possibilities from hidden pair in column";case Sudoku.LogType.HIDDEN_PAIR_SECTION:return"Remove possibilities from hidden pair in section";default:return"!!! Performed unknown optimization !!!"}},this.toString=function(){var i="Round: "+this.getRound()+" - ";if(i+=this.getDescription(),a>0||c>-1){i+=" (";var n=!1;c>-1&&(n&&(i+=" - "),i+="Row: "+(t(c)+1)+" - Column: "+(e(c)+1),n=!0),a>0&&(n&&(i+=" - "),i+="Value: "+a,n=!0),i+=")"}return i}},this.setPuzzle=function(e){for(var t=0;t<Sudoku.BOARD_SIZE;t++)g[t]=e[t];return y.call(this)},this.printPuzzle=function(){return V.call(this,g)},this.getPuzzleString=function(){return X.call(this,g)},this.printSolution=function(){return V.call(this,q)},this.getSolutionString=function(){return X.call(this,q)},this.solve=function(e){if(!e||e<=1)return y.call(this),F(),this.solve(2);for(O=e;R.call(this,e);){if(this.isSolved())return!0;if(b.call(this))return!1}for(var t=e+1,i=e+2,n=0;D.call(this,t,n);n++){if(!b.call(this)&&this.solve(i))return!0;Z.call(this,i),Z.call(this,t)}return!1},this.countSolutions=function(e,t){if(!e||e<=1){var i=I;this.setRecordHistory(!1);var n=h;this.setLogHistory(!1),y.call(this);var r=this.countSolutions(2,!1);return this.setRecordHistory(i),this.setLogHistory(n),r}for(;R.call(this,e);){if(this.isSolved())return Z.call(this,e),1;if(b.call(this))return Z.call(this,e),0}for(var o=0,s=e+1,l=0;D.call(this,s,l);l++)if(o+=this.countSolutions(s,t),t&&o>=2)return Z.call(this,e),o;return Z.call(this,e),o},this.isSolved=function(){for(var e=0;e<Sudoku.BOARD_SIZE;e++)if(0==q[e])return!1;return!0},this.getSolveHistory=function(){return this.isSolved()?v:"No solve history - Puzzle is not possible to solve."},this.getSolveHistoryString=function(){return this.isSolved()?Q.call(this,v):"No solve history - Puzzle is not possible to solve."},this.printSolveHistory=function(){this.isSolved()?Y(v):u("No solve history - Puzzle is not possible to solve.")},this.setRecordHistory=function(e){I=e},this.setLogHistory=function(e){h=e},this.setPrintStyle=function(e){d=e},this.generatePuzzle=function(){return this.generatePuzzleSymmetry(Sudoku.Symmetry.NONE)},this.generatePuzzleSymmetry=function(i){i==Sudoku.Symmetry.RANDOM&&(i=function(){var e=Math.floor(4*Math.random());switch(e){case 0:return Sudoku.Symmetry.ROTATE90;case 1:return Sudoku.Symmetry.ROTATE180;case 2:return Sudoku.Symmetry.MIRROR;case 3:return Sudoku.Symmetry.FLIP}throw"Unexpected random value: "+e}.call(this));var n=I;this.setRecordHistory(!1);var r=h;this.setLogHistory(!1),function(){for(var e=0;e<Sudoku.BOARD_SIZE;e++)g[e]=0;y.call(this)}.call(this),F.call(this),this.solve(),i==Sudoku.Symmetry.NONE&&function(){for(var e=2;e<=O;e+=2)Z.call(this,e)}.call(this);for(var o=0;o<Sudoku.BOARD_SIZE;o++)g[o]=q[o];F.call(this);for(o=0;o<Sudoku.BOARD_SIZE;o++){var s=_[o];if(g[s]>0){var a=-1,u=-1,c=-1;switch(i){case Sudoku.Symmetry.ROTATE90:u=l(Sudoku.ROW_COL_SEC_SIZE-1-e(s),t(s)),c=l(e(s),Sudoku.ROW_COL_SEC_SIZE-1-t(s));case Sudoku.Symmetry.ROTATE180:a=l(Sudoku.ROW_COL_SEC_SIZE-1-t(s),Sudoku.ROW_COL_SEC_SIZE-1-e(s));break;case Sudoku.Symmetry.MIRROR:a=l(t(s),Sudoku.ROW_COL_SEC_SIZE-1-e(s));break;case Sudoku.Symmetry.FLIP:a=l(Sudoku.ROW_COL_SEC_SIZE-1-t(s),e(s))}var f=g[s];g[s]=0;var S=0;a>=0&&(S=g[a],g[a]=0);var w=0;u>=0&&(w=g[u],g[u]=0);var E=0;c>=0&&(E=g[c],g[c]=0),y.call(this),this.countSolutions(2,!0)>1&&(g[s]=f,a>=0&&0!=S&&(g[a]=S),u>=0&&0!=w&&(g[u]=w),c>=0&&0!=E&&(g[c]=E))}}return y.call(this),this.setRecordHistory(n),this.setLogHistory(r),!0},this.getGivenCount=function(){for(var e=0,t=0;t<Sudoku.BOARD_SIZE;t++)0!=g[t]&&e++;return e},this.getSingleCount=function(){return $.call(this,m,Sudoku.LogType.SINGLE)},this.getHiddenSingleCount=function(){return $.call(this,m,Sudoku.LogType.HIDDEN_SINGLE_ROW)+$.call(this,m,Sudoku.LogType.HIDDEN_SINGLE_COLUMN)+$.call(this,m,Sudoku.LogType.HIDDEN_SINGLE_SECTION)},this.getNakedPairCount=function(){return $.call(this,m,Sudoku.LogType.NAKED_PAIR_ROW)+$.call(this,m,Sudoku.LogType.NAKED_PAIR_COLUMN)+$.call(this,m,Sudoku.LogType.NAKED_PAIR_SECTION)},this.getHiddenPairCount=function(){return $.call(this,m,Sudoku.LogType.HIDDEN_PAIR_ROW)+$.call(this,m,Sudoku.LogType.HIDDEN_PAIR_COLUMN)+$.call(this,m,Sudoku.LogType.HIDDEN_PAIR_SECTION)},this.getBoxLineReductionCount=function(){return $.call(this,m,Sudoku.LogType.ROW_BOX)+$.call(this,m,Sudoku.LogType.COLUMN_BOX)},this.getPointingPairTripleCount=function(){return $.call(this,m,Sudoku.LogType.POINTING_PAIR_TRIPLE_ROW)+$.call(this,m,Sudoku.LogType.POINTING_PAIR_TRIPLE_COLUMN)},this.getGuessCount=function(){return $.call(this,m,Sudoku.LogType.GUESS)},this.getBacktrackCount=function(){return $.call(this,v,Sudoku.LogType.ROLLBACK)},this.getSolveInstructions=function(){return this.isSolved()?m:"No solve instructions - Puzzle is not possible to solve."},this.getSolveInstructionsString=function(){return this.isSolved()?Q.call(this,m):"No solve instructions - Puzzle is not possible to solve."},this.printSolveInstructions=function(){this.isSolved()?Y(m):u("No solve instructions - Puzzle is not possible to solve.")},this.getDifficulty=function(){return this.getGuessCount()>0?Sudoku.Difficulty.EXPERT:this.getBoxLineReductionCount()>0?Sudoku.Difficulty.INTERMEDIATE:this.getPointingPairTripleCount()>0?Sudoku.Difficulty.INTERMEDIATE:this.getHiddenPairCount()>0?Sudoku.Difficulty.INTERMEDIATE:this.getNakedPairCount()>0?Sudoku.Difficulty.INTERMEDIATE:this.getHiddenSingleCount()>0?Sudoku.Difficulty.EASY:this.getSingleCount()>0?Sudoku.Difficulty.SIMPLE:Sudoku.Difficulty.UNKNOWN},this.getDifficultyAsString=function(){switch(this.getDifficulty()){case Sudoku.Difficulty.EXPERT:return"Expert";case Sudoku.Difficulty.INTERMEDIATE:return"Intermediate";case Sudoku.Difficulty.EASY:return"Easy";case Sudoku.Difficulty.SIMPLE:return"Simple";default:return"Unknown"}}};Sudoku.PrintStyle={ONE_LINE:0,COMPACT:1,READABLE:2,CSV:3},Sudoku.Difficulty={UNKNOWN:0,SIMPLE:1,EASY:2,INTERMEDIATE:3,EXPERT:4},Sudoku.Symmetry={NONE:0,ROTATE90:1,ROTATE180:2,MIRROR:3,FLIP:4,RANDOM:5},Sudoku.LogType={GIVEN:0,SINGLE:1,HIDDEN_SINGLE_ROW:2,HIDDEN_SINGLE_COLUMN:3,HIDDEN_SINGLE_SECTION:4,GUESS:5,ROLLBACK:6,NAKED_PAIR_ROW:7,NAKED_PAIR_COLUMN:8,NAKED_PAIR_SECTION:9,POINTING_PAIR_TRIPLE_ROW:10,POINTING_PAIR_TRIPLE_COLUMN:11,ROW_BOX:12,COLUMN_BOX:13,HIDDEN_PAIR_ROW:14,HIDDEN_PAIR_COLUMN:15,HIDDEN_PAIR_SECTION:16},Sudoku.GRID_SIZE=3,Sudoku.ROW_COL_SEC_SIZE=Sudoku.GRID_SIZE*Sudoku.GRID_SIZE,Sudoku.SEC_GROUP_SIZE=Sudoku.ROW_COL_SEC_SIZE*Sudoku.GRID_SIZE,Sudoku.BOARD_SIZE=Sudoku.ROW_COL_SEC_SIZE*Sudoku.ROW_COL_SEC_SIZE,Sudoku.POSSIBILITY_SIZE=Sudoku.BOARD_SIZE*Sudoku.ROW_COL_SEC_SIZE;var hintArray,board=new Array(Sudoku.BOARD_SIZE),boardcolors=new Array(Sudoku.BOARD_SIZE),possibilities=new Array(Sudoku.POSSIBILITY_SIZE),startTime=0,gameType="blank",usedHint=!1,stats=new Array,qq=new Sudoku,hintPosition=-1,links={};function stringToStats(e){stats=new Array;for(var t=e.split("|"),i=0;i<t.length;i++){var n=t[i].split(",");n.length>4&&(stats[n[0]]=new Stat(n[0],n[1],n[2],n[3],n[4],n.length>5?n[5]:0))}}function init(){initStats(),newUrlGame()||showScreen("title")}function initStats(){var e=getCookie("sudokuStats").split("||");if(e.length>0&&stringToStats(e[0]),fillDifficultySelect(),e.length>1)for(var t=e[1].split("&"),i=0;i<t.length;i++){var n=t[i].split("=");2==n.length&&"diff"==n[0]&&setDifficulty(n[1])}drawStats()}window.onload=init;var difficultyLevels=new Array("simple","easy","intermediate","expert","random");function drawStats(){for(var e=el("stats"),t="<table>",i=0;i<difficultyLevels.length-1;i++){var n=difficultyLevels[i],r=getStat(n);t+="<tr><th>"+getDiffName(n)+"</th><td>"+(r.besttime?"Best: "+toPrettyTime(r.besttime)+"<br>":"")+"Solved: "+r.wincount,0==r.wincount&&"expert"!=n&&(t+="<br>You must solve "+n+" puzzles without asking for hints to advance and play more difficult games.",i=9),t+="</td></tr>"}t+="</table>",e.innerHTML=t}function haveStats(){for(var e=0;e<difficultyLevels.length;e++){var t=difficultyLevels[e];if(null!=stats[t]&&stats[t].time)return!0}return!1}function fillDifficultySelect(){for(var e=0,t=!1,i=0;i<difficultyLevels.length&&!t;i++){var n=difficultyLevels[i];addDifficultyToSelect(n),e++,null!=stats[n]&&0!=stats[n].wincount||(t=!0)}el("difficultyoption").style.display=e>1?"block":"none"}function getDiffName(e){return e.substring(0,1).toUpperCase()+e.substring(1,e.length)}function addDifficultyToSelect(e){var t,i=document.gameform.difficultyselect,n=i.options;for(t=0;t<n.length;t++)if(n[t].value==e)return;n[t]=new Option(getDiffName(e),e),i.selectedIndex=t}function setDifficulty(e){var t,i=document.gameform.difficultyselect,n=i.options;for(t=0;t<n.length;t++)n[t].value==e&&(i.selectedIndex=t)}function getCookie(e){var t=e+"=",i=document.cookie.indexOf("; "+t);if(-1==i){if(0!=(i=document.cookie.indexOf(t)))return""}else i+=2;var n=document.cookie.indexOf(";",i);return-1==n&&(n=document.cookie.length),unescape(document.cookie.substring(i+t.length,n))}function statsToString(){var e="";for(var t in stats)""!=e&&(e+="|"),e+=stats[t].type+","+stats[t].wincount+","+stats[t].time+","+stats[t].winwithhintcount+","+stats[t].gaveupcount+","+stats[t].besttime;return e}function Stat(e,t,i,n,r,o){this.type=e,this.wincount=ensureNum(t),this.time=ensureNum(i),this.winwithhintcount=ensureNum(n),this.gaveupcount=ensureNum(r),this.besttime=ensureNum(o)}function ensureNum(e){return""+e=="NaN"?0:("string"==typeof e&&(e=parseInt(e)),e)}function draw(){drawStats(),determineSquareSize(),el("game").innerHTML=getFullHtml()}function clickValue(e,t,i){clearHint(),(e.ctrlKey||e.altKey||e.shiftKey)&&!isOnlyPossibilityInCell(t)?removePossibility(t,i):mark(t,i,getColor()),setLink("Everything filled in"),draw(),detectComplete()}function clickset(e){clearHint(),unmark(e),setLink("Everything filled in"),draw()}function removePossibility(e,t){possibilities[getPossibilityIndex(e,t-1)]=1}function checkPossibility(e,t){for(var i,n=!0,r=cellToRow(e),o=cellToColumn(e),s=cellToSection(e),l=0;l<9;l++)i=rowColumnToCell(l,o),board[i]==t&&(n=!1);for(var a=0;a<9;a++)i=rowColumnToCell(r,a),board[i]==t&&(n=!1);for(var u=0;u<9;u++)i=sectionToCell(s,u),board[i]==t&&(n=!1);possibilities[getPossibilityIndex(e,t-1)]=n?0:1}function unmark(e){var t=board[e];board[e]=0,boardcolors[e]=0;for(var i=0;i<9;i++)checkPossibility(e,i+1);for(var n=cellToRow(e),r=cellToColumn(e),o=cellToSection(e),s=0;s<9;s++)checkPossibility(rowColumnToCell(s,r),t);for(var l=0;l<9;l++)checkPossibility(rowColumnToCell(n,l),t);for(var a=0;a<9;a++)checkPossibility(sectionToCell(o,a),t)}function mark(e,t,i){var n;board[e]=t,boardcolors[e]=i;for(var r=0;r<9;r++)n=getPossibilityIndex(e,r),0==possibilities[n]&&(possibilities[n]=1);for(var o=cellToRow(e),s=cellToColumn(e),l=cellToSection(e),a=0;a<9;a++)n=getPossibilityIndex(rowColumnToCell(a,s),t-1),0==possibilities[n]&&(possibilities[n]=1);for(var u=0;u<9;u++)n=getPossibilityIndex(rowColumnToCell(o,u),t-1),0==possibilities[n]&&(possibilities[n]=1);for(var c=0;c<9;c++)n=getPossibilityIndex(sectionToCell(l,c),t-1),0==possibilities[n]&&(possibilities[n]=1)}function isOnlyPossibilityInCell(e){for(var t=0,i=0;i<9;i++)0==possibilities[getPossibilityIndex(e,i)]&&t++;return 1==t}function detectComplete(){for(var e=!0,t=0;t<Sudoku.BOARD_SIZE;t++)0==board[t]&&(e=!1);if(e&&"complete"!=gameType){var i=getGameTime(),n=getDiffName(gameType)+" Sudoku solved in "+toPrettyTime(i),r=getStat(gameType);usedHint?(n+=" although you needed a hint.",r.winwithhintcount++):(r.wincount++,r.time+=i,(!r.besttime||i<r.besttime)&&(r.besttime=i,n+="; your best time!")),el("endgamemessage").innerHTML=n,saveStats(),gameType="complete",usedHint=!1,pauseTime=0,startTime=(new Date).getTime(),fillDifficultySelect(),showScreen("over"),draw()}}function getStat(e){var t=stats[e];return null==t&&(t=new Stat(e,0,0,0,0),stats[e]=t),t}function getDifficulty(){return document.gameform.difficultyselect.value}function getSymmetry(){return console.log(document.gameform.symmetryselect.value),document.gameform.symmetryselect.value}function saveStats(){var e=new Date;e.setTime(e.getTime()+31536e6),document.cookie="sudokuStats="+escape(statsToString()+"||diff="+getDifficulty())+"; expires="+e.toGMTString()}function getGameTime(){return(new Date).getTime()-startTime-pauseTime}function toPrettyTime(e){var t=Math.floor(e/36e5);e%=36e5;var i=Math.floor(e/6e4);e%=6e4;var n=Math.floor(e/1e3);return e%=1e3,t>0?t+" hour"+(1!=t?"s":"")+", "+i+" minute"+(1!=i?"s":""):i>0?i+" minute"+(1!=i?"s":"")+", "+n+" second"+(1!=n?"s":""):n+" second"+(1!=n?"s":"")}function getFullHtml(){for(var e="<table>",t=0;t<9;t++)t%3==0&&(e+="<tr>"),e+="<td class=sudokusection>",e+=getSectionHtml(t),e+="</td>",t%3==2&&(e+="</tr>");return e+="</table>"}var smallSquareFontSize,largeSquareFontSize,squareSize=0;function determineSquareSize(){for(var e=getWindowHeight(),t=1e5,i=el("testcell"),n=100,r=0;t>e&&t!=r;){r=t,smallSquareFontSize="font-size:"+n+"%;",largeSquareFontSize="font-size:"+3*n+"%;";var o="";o+="<table>";for(var s=0;s<9;s++)s%3==0&&(o+="<tr>"),o+="<td style='font-family:monospace;"+smallSquareFontSize+"'>5</td>",s%3==2&&(o+="</tr>");o+="</table>",i.innerHTML=o,squareSize=i.offsetHeight+4,i.innerHTML="",t=10*squareSize,n*=.9}}function getWindowHeight(){return"number"==typeof window.innerWidth?window.innerHeight:document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?document.documentElement.clientHeight:document.body&&(document.body.clientWidth||document.body.clientHeight)?document.body.clientHeight:800}function getSectionHtml(e){for(var t="<table class=unselectable unselectable=on>",i=0;i<9;i++){i%3==0&&(t+="<tr>");var n=sectionToCell(e,i);t+="<td style='width:"+squareSize+"px;height:"+squareSize+"px;' align=center class='cell unselectable"+(n==hintPosition?" hintcell":"")+"' unselectable=on>",t+=getCellHtml(n),t+="</td>",i%3==2&&(t+="</tr>")}return t+="</table>"}function getCellHtml(e){var t="";if(0==board[e]){for(var i=0,n="",r="<table class=unselectable unselectable=on>",o=0;o<9;o++){o%3==0&&(r+="<tr class=unselectable unselectable=on>");var s=o+1,l=getPossibilityIndex(e,o);0==possibilities[l]?(r+="<td "+(n="onmouseup='clickValue(event,"+e+","+s+");'")+" style='font-family:monospace;cursor:pointer;cursor:hand;"+smallSquareFontSize+"' class=unselectable unselectable=on>",r+=s,r+="</td>",i++):r+="<td style='font-family:monospace;"+smallSquareFontSize+"' class=unselectable unselectable=on>&nbsp;</td>",o%3==2&&(r+="</tr>")}r+="</table>",i>1?t+=r:1==i?(t+="<div style='cursor:pointer;cursor:hand' "+n+" class=unselectable unselectable=on>",t+=r,t+="</div>"):t+="<div style='"+largeSquareFontSize+"font-weight:bold;background-color:red;color:orange' class=unselectable unselectable=on>X</div>"}else boardcolors[e]?t+="<div style='"+largeSquareFontSize+"font-weight:bold;cursor:pointer;cursor:hand;color:"+boardcolors[e]+";' onmouseup='clickset("+e+")' class=unselectable unselectable=on>"+board[e]+"</div>":t+="<div style='"+largeSquareFontSize+"font-weight:bold;' class='unselectable given' unselectable=on>"+board[e]+"</div>";return t}function sectionToFirstCell(e){return e%3*3+3*Math.floor(e/3)*9}function sectionToCell(e,t){return sectionToFirstCell(e)+9*Math.floor(t/3)+t%3}function getColor(){var e=document.gameform.color;console.log(e);for(var t=0;t<e.length;t++)if(e[t].checked)return e[t].value;return"red"}function setColor(e){for(var t=document.gameform.color,i=0;i<t.length;i++)t[i].value==e&&(t[i].checked=!0)}function cellToColumn(e){return e%9}function cellToRow(e){return Math.floor(e/9)}function cellToSection(e){return 3*Math.floor(e/27)+Math.floor(cellToColumn(e)/3)}function getPossibilityIndex(e,t){return t+9*e}function rowColumnToCell(e,t){return 9*e+t}var generateNewGame=function(){qq.generatePuzzleSymmetry(getSymmetry()),qq.setRecordHistory(!0),qq.solve();var e=qq.getDifficultyAsString().toLowerCase();"random"!=getDifficulty()&&e!=getDifficulty()?setTimeout(generateNewGame,0):(newGame(e,qq.getPuzzleString()),el("newgamemessage").innerHTML="")};function newSudokuGame(){showScreen("loading");var e=document.createElement("img");e.src="loading.gif";var t=el("newgamemessage");t.innerHTML="Loading new game ",t.appendChild(e),setTimeout(generateNewGame,0)}function clearHint(){hintArray=null,hintPosition=-1,document.gameform.hintButton.disabled=!1,document.gameform.hintButton.value="Hint",setHint("")}function hint(){usedHint=!0;var e="";if(hintPosition=-1,!hintArray){qq.setPuzzle(board),qq.setRecordHistory(!0),qq.solve();var t=qq.getSolveHistory();"string"==typeof t?e=t:hintArray=t}for(;!e&&hintArray&&hintArray.length;){var i=hintArray.shift();haveUsedHint(i)||(e=i.getDescription(),i.getValue()>0&&(e+=" - "+i.getValue()),hintPosition=i.getPosition())}hintArray&&hintArray.length?e&&(document.gameform.hintButton.value="More hints"):document.gameform.hintButton.disabled=!0,setHint(e),draw()}function haveUsedHint(e){switch(e.getType()){case Sudoku.LogType.GIVEN:return!0;case Sudoku.LogType.NAKED_PAIR_ROW:for(var t=cellToRow(e.getPosition()),i=[],n=0;n<9;n++)i[n]=possibilities[getPossibilityIndex(e.getPosition(),n)];for(var r=0;r<9;r++){workingCell=rowColumnToCell(t,r);var o=!0,s=!1;for(n=0;!board[workingCell]&&n<9;n++){var l=possibilities[getPossibilityIndex(workingCell,n)];i[n]!=l&&(o=!1),i[n]||l||(s=!0)}if(!o&&s)return!1}return!0;case Sudoku.LogType.NAKED_PAIR_COLUMN:var a=cellToColumn(e.getPosition());for(i=[],n=0;n<9;n++)i[n]=possibilities[getPossibilityIndex(e.getPosition(),n)];for(var u=0;u<9;u++){workingCell=rowColumnToCell(u,a);for(o=!0,s=!1,n=0;!board[workingCell]&&n<9;n++){l=possibilities[getPossibilityIndex(workingCell,n)];i[n]!=l&&(o=!1),i[n]||l||(s=!0)}if(!o&&s)return!1}return!0;case Sudoku.LogType.NAKED_PAIR_SECTION:var c=cellToSection(e.getPosition());for(i=[],n=0;n<9;n++)i[n]=possibilities[getPossibilityIndex(e.getPosition(),n)];for(var g=0;g<9;g++){workingCell=sectionToCell(c,g);for(o=!0,s=!1,n=0;!board[workingCell]&&n<9;n++){l=possibilities[getPossibilityIndex(workingCell,n)];i[n]!=l&&(o=!1),i[n]||l||(s=!0)}if(!o&&s)return!1}return!0;default:return!1}}function setHint(e){var t=el("hint");t.innerHTML=e,t.style.display=e?"block":"none"}function clearBoard(){recordgaveup(),clearHint();for(var e=0;e<Sudoku.BOARD_SIZE;e++)board[e]=0;for(var t=0;t<Sudoku.BOARD_SIZE;t++)boardcolors[t]=0;for(var i=0;i<Sudoku.POSSIBILITY_SIZE;i++)possibilities[i]=0;setLink(),usedHint=!1,pauseTime=0,startTime=(new Date).getTime()}function clearColor(e){clearHint();for(var t=0;t<Sudoku.BOARD_SIZE;t++)0!=board[t]&&boardcolors[t]==e&&unmark(t);draw()}function newGame(e,t){clearBoard(),gameType=e,showScreen("game");for(var i=0,n=0;n<t.length;n++){var r=t.charAt(n);("."==r||r>="0"&&r<="9")&&i<Sudoku.BOARD_SIZE&&(r>="1"&&r<="9"&&mark(i,r-"0",null),i++)}setLink("Link to this game"),draw()}function setLink(e){e?links[e]=getGameUrl():links={};var t=getLinkHtml("Link to this game")+getLinkHtml("Everything filled in");el("gamelinks").innerHTML=t,el("ingamelinks").innerHTML=t}function getLinkHtml(e){if(!links[e])return"";e.replace(/ /g,"");return'<div><a href="'+links[e]+'">'+e+'</a>:</div><div onclick="select(this);" class=textlink>'+links[e]+"</div>"}function select(e){var t;document.selection?((t=document.body.createTextRange()).moveToElementText(e),t.select()):window.getSelection&&((t=document.createRange()).selectNodeContents(e),window.getSelection().removeAllRanges(),window.getSelection().addRange(t))}function getGameUrl(){var e=document.location.href;return-1!=e.indexOf("?")&&(e=e.substring(0,e.indexOf("?"))),e+"?game="+gameToString()}function gameToString(){for(var e="",t=0;t<Sudoku.BOARD_SIZE;t++)0==board[t]?e+=".":e+=board[t];return e}function recordgaveup(){for(var e=0,t=0;t<Sudoku.BOARD_SIZE;t++)null!=board&&t<board.length&&board[t]&&0!=board[t]&&e++;0!=e&&e!=Sudoku.BOARD_SIZE&&(getStat(gameType).gaveupcount++,saveStats())}function startBlank(){return newGame("blank",""),!1}function newUrlGame(){var e=location.search.substring(1,location.search.length),t=new Array,i=!1;t=e.split("&");for(var n=0;n<t.length;n++){if(0==t[n].indexOf("game="))newGame("url",t[n].substring(5)),i=!0}return i}window.onunload=recordgaveup;var pauseStart=0,pauseTime=0,pauseState="",resumecountdown=5;function pauseGame(){pauseStart=(new Date).getTime(),el("elapsedtime").innerHTML="Game play time: "+toPrettyTime(getGameTime()),showScreen("pause")}function resumeGame(){resumecountdown=5,finishResume()}function finishResume(){resumecountdown>0?(el("resumecount").innerHTML=resumecountdown,showScreen("resume"),resumecountdown--,setTimeout(finishResume,1e3)):(showScreen("game"),pauseTime+=(new Date).getTime()-pauseStart)}function showScreen(e){el("entiregame").style.display="game"==e?"block":"none",el("titlescreen").style.display=/title|over/.test(e)?"block":"none",el("pausescreen").style.display="pause"==e?"block":"none",el("resumescreen").style.display="resume"==e?"block":"none",el("newgamemessage").style.display="loading"==e?"block":"none",el("endgamescreen").style.display="over"==e?"block":"none",console.log(e+" "+haveStats()),el("statsarea").style.display=!/game|loading|resume/.test(e)&&haveStats()?"block":"none",console.log(el("statsarea").style.display),el("gamelinks").style.display="none",el("instructions").style.display="none",el("options").style.display="none"}function toggleDisp(e){var t=el(e).style;return t.display="block"==t.display?"none":"block",!1}function showOptions(){var e=el("options").style;e.display="block"==e.display?"none":"block"}function el(e){return document.getElementById(e)}